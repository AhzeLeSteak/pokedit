import {Pokemon} from "./PokeTypes";

type Curve = 'f' | 'mf' | 'ms' | 's' | 'e' | 'fl';

const calcFast = (lvl: number) => .8 * lvl**3;
const calcMediumFast = (lvl: number) => lvl**3;
const calcMediumSlow = (lvl: number) => 1.2 * lvl**3 - 15*lvl**2 + 100*lvl - 140;
const calcSlow = (lvl: number) => 1.25 * lvl**3;
const calcErratic = (lvl: number) => 0;
const calcFluctuating = (lvl: number) => 0;

const funcs : Record<Curve, (lvl: number) => number> = {
    e: calcErratic,
    fl: calcFluctuating,
    f: calcFast,
    mf: calcMediumFast,
    ms: calcMediumSlow,
    s: calcSlow
}


export function calcNextXp(poke: Pokemon) {
    const type = xp_curves[poke.pokedex_id-1];
    if(!(type in funcs))
        return console.warn(type, 'not a known xp type');

    const xp_needed_for_actual_level = Math.floor(funcs[type](poke.level));
    poke.level++;
    poke.xp_needed_for_next_level = Math.floor(funcs[type](poke.level));
    poke.level--;

    poke.percentage_level = (poke.exp - xp_needed_for_actual_level) / (poke.xp_needed_for_next_level - xp_needed_for_actual_level)
}



const xp_curves: Curve[] = [
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "f",
    "f",
    "mf",
    "mf",
    "f",
    "f",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "f",
    "f",
    "mf",
    "s",
    "s",
    "mf",
    "f",
    "f",
    "f",
    "f",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "f",
    "f",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "f",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "mf",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "mf",
    "f",
    "f",
    "mf",
    "mf",
    "ms",
    "s",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "f",
    "mf",
    "mf",
    "f",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "f",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "fl",
    "fl",
    "s",
    "s",
    "s",
    "e",
    "e",
    "e",
    "ms",
    "ms",
    "ms",
    "fl",
    "fl",
    "f",
    "mf",
    "f",
    "f",
    "ms",
    "f",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "s",
    "s",
    "mf",
    "mf",
    "e",
    "fl",
    "ms",
    "fl",
    "fl",
    "s",
    "s",
    "fl",
    "fl",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "e",
    "e",
    "e",
    "fl",
    "f",
    "f",
    "mf",
    "mf",
    "fl",
    "fl",
    "mf",
    "mf",
    "e",
    "e",
    "e",
    "e",
    "e",
    "e",
    "mf",
    "ms",
    "f",
    "f",
    "f",
    "f",
    "s",
    "f",
    "ms",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "e",
    "e",
    "e",
    "s",
    "f",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "e",
    "e",
    "e",
    "e",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "fl",
    "fl",
    "mf",
    "mf",
    "f",
    "ms",
    "f",
    "f",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "ms",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "s",
    "e",
    "e",
    "s",
    "s",
    "s",
    "ms",
    "mf",
    "mf",
    "s",
    "mf",
    "mf",
    "mf",
    "f",
    "mf",
    "mf",
    "mf",
    "ms",
    "s",
    "mf",
    "s",
    "mf",
    "f",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "f",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "s",
    "s",
    "ms",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "e",
    "e",
    "e",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "f",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "mf",
    "ms",
    "mf",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "e",
    "e",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "e",
    "ms",
    "ms",
    "ms",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "ms",
    "ms",
    "mf",
    "mf",
    "mf",
    "f",
    "f",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "mf",
    "mf",
    "ms",
    "s",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "ms",
    "f",
    "s",
    "ms",
    "mf",
    "mf",
    "mf",
    "mf",
    "mf",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s",
    "s"
];
